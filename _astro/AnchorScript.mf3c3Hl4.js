import{l as S,g as w}from"./preact.module.dOkjm3yY.js";import{p as y}from"./hooks.module.obzsRR2F.js";var E=0;function g(c,s,l,T,h,f){var r,n,a={};for(n in s)n=="ref"?r=s[n]:a[n]=s[n];var u={type:c,props:a,key:l,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--E,__i:-1,__u:0,__source:h,__self:f};if(typeof c=="function"&&(r=c.defaultProps))for(n in r)a[n]===void 0&&(a[n]=r[n]);return S.vnode&&S.vnode(u),u}const _=64,A=_+16,C=_-1;let d;const H=({isSection:c=!1})=>(y(()=>{const s=document.querySelectorAll(`.anchorContent :is(${c?"section":"h1, h2, h3, h4, h5, h6"})`),l=Array.from(s).map(e=>document.getElementById(e.getAttribute("id")||"")).filter(e=>e!=null);function T(e){const t=e.getBoundingClientRect();return c?t.top>=0||t.bottom-_>=0:t.top>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)}function h(e){const t=document.querySelectorAll(".anchorGroup a.tocAnchorLinks");let i=[];t.forEach(o=>{o.querySelector("span")?.classList.add("opacity-40"),o.classList.remove("text-primary"),o.hash!==""&&o.hash.replace("#","")===e&&i.push(o)}),i.length>0&&i.forEach(o=>{o.classList.add("text-primary"),o.querySelector("span")?.classList.remove("opacity-40")})}function f(){if(!l.some(t=>{const i=T(t);return i&&h(t.id),i})){let t;l.forEach(i=>{const o=i.getBoundingClientRect();(t===void 0||o.bottom<0&&t.rectBottom<o.bottom)&&(t={id:i.id,rectBottom:o.bottom})}),t!==void 0&&h(t.id)}}function r(){window.location.hash!==""?l.some(e=>{const t=window.location.hash.replace("#","")===e.id;return t&&h(e.id),t}):f()}function n(){document.querySelectorAll(".anchorGroup a.tocAnchorLinks, .anchorContent a").forEach(e=>{e.addEventListener("click",t=>{const i=new URL(e.href);if(window.location.pathname!==i.pathname||e.hash==="")return;t.preventDefault();const o=e.hash;if(!l.some(p=>o.replace("#","")===p.id))return;const v=document.querySelector(`.anchorContent ${o}`);if(v){const p=v.offsetTop;window.scrollTo({top:p-(c?C:A),behavior:"smooth"}),history.replaceState({},document.title,window.location.pathname+window.location.search+o);const m=document.getElementById("layout-sidebar");m&&m.checked&&m.click()}})})}function a(){window.addEventListener("scroll",u)}function u(){d!==void 0&&clearTimeout(d),d=setTimeout(()=>f(),100)}return r(),n(),a(),()=>{d!==void 0&&clearTimeout(d),window.removeEventListener("scroll",u)}},[]),g(w,{}));export{H as default};
